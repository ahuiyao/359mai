"use strict";function Cart(){this.list=document.querySelector(".cartList"),this.o_zj=document.querySelectorAll(".zj"),this.sum=0,this.init()}Cart.prototype={constructor:Cart,init:function(){var t,i=this,e=window.localStorage,e=e.getItem("carts")?e.getItem("carts"):"",n=this.convertStrToObj(e);for(t in n){var r=n[t],a=document.createElement("ul");a.className="c_t_cz",a.setAttribute("data-good-id",t);var o=r.price.match(/\d+/g)[0],l=parseInt(o*r.num);this.sum+=l,this.o_zj[0].innerHTML=this.sum,this.o_zj[1].innerHTML=this.sum,a.innerHTML='\n      <li><img src="http://www.359mai.com/public/images/34/68/3e/09052f39497d7e47c185d44702029974a1363a3e.jpg?1613814458#h" alt=""></li>\n      <li>'.concat(r.name,"</li>\n      <li>").concat(r.price,'</li>\n      <li class="num">\n      <a href="javascript:;" class="minus">-</a>\n      <input type="text" name="" id="" value="').concat(r.num,'" />\n       <a href="javascript:;" class="plus">+</a>\n      </li>\n      <li>0</li>\n      <li>0</li>\n      <li class="total">').concat(o*r.num,' </li>\n      <li>  <a href="">收藏</a>  |  <a href="javascript:;" class="del">删除</a></li>\n          '),this.list.appendChild(a)}for(var c=document.querySelectorAll(".minus"),s=0,u=c.length;s<u;s++)c[s].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("carts")?window.localStorage.getItem("carts"):"",e=i.convertStrToObj(e);1<e[t].num&&e[t].num--,window.localStorage.setItem("carts",JSON.stringify(e)),this.nextElementSibling.value=e[t].num,this.parentNode.nextElementSibling.innerText=e[t].price*e[t].num};for(var d=document.querySelectorAll(".plus"),m=0,g=d.length;m<g;m++)d[m].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("carts")?window.localStorage.getItem("carts"):"",e=i.convertStrToObj(e);e[t].num++,window.localStorage.setItem("carts",JSON.stringify(e)),this.previousElementSibling.value=e[t].num,this.parentNode.nextElementSibling.innerText=e[t].price*e[t].num};for(var h=document.querySelectorAll(".num input"),p=0,S=h.length;p<S;p++)h[p].onblur=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("carts")?window.localStorage.getItem("carts"):"",n=i.convertStrToObj(e),e=this.value;/^\d+$/.test(e)?n[t].num=e:n[t].num=1,window.localStorage.setItem("carts",JSON.stringify(n)),this.value=n[t].num,this.parentNode.nextElementSibling.innerText=n[t].price*n[t].num};for(var w=document.querySelectorAll(".del"),v=0,f=w.length;v<f;v++)w[v].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("carts")?window.localStorage.getItem("carts"):"",e=i.convertStrToObj(e);delete e[t],window.localStorage.setItem("carts",JSON.stringify(e)),this.parentNode.parentNode.remove()}},convertStrToObj:function(t){return t?JSON.parse(t):{}}},new Cart;